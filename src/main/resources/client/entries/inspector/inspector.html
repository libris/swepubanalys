<div>
	<site-wrapper activity="inspector">
		<div>
			<h2>Förändring av kvalitet på data - 
				<span v-if="labels.length === 0">
					Alla lärosäten
				</span>
				<span v-for="d in (labels || [])" style="display: inline-block">
					{{ d.value }}<template v-if="d.index !== $parent.labels.length-1">,&nbsp;</template>
				</span>
			</h2>
			<div class="{{ $data._styles.YearIndicator }}">
				<p>{{ formModel.from }} {{ formModel.from || formModel.to ? '-' : '' }} {{ formModel.to }}</p>
			</div>
			<!-- Visualisations -->
			<div class="{{ $data._styles.Visualisations }}">
				<div v-if="loadingData" class="{{ $data._styles.Info }}">
					<h1>Laddar...</h1>
				</div>
				<div v-if="emptyAggregations" class="{{ $data._styles.Info }}">
					<h1>Tomt sökresultat</h1>
				</div>
				<div v-if="error" class="{{ $data._styles.Info }}">
					<h1>Problem med att ladda data</h1>
				</div>
				<!-- Charts -->
				<div class="row" v-show="!emptyAggregations && !error">
					<div class="col-md-4 {{ $data._styles.ChartContainer }}">
						<template v-if="lineChart.getContent">
							<p>Antal poster</p>
							<div>
								<chart type="line" height="290" :get-content="lineChart.getContent"></chart>
							</div>
						</template>
					</div>
					<div class="col-md-4 {{ $data._styles.ChartContainer }}">
						<template v-if="barChart.getContent">
							<p>% Felfria poster</p>
							<div>
								<chart type="bar" x-axis-type="category" :show-legend="false" height="270" tick-format="%" :get-content="barChart.getContent"></chart>
							</div>
						</template>
					</div>
					<div class="col-md-4 {{ $data._styles.ChartContainer }}">
						<template v-if="pieChart.getContent">
							<p>Total andel felfria poster</p>
							<div>
								<chart type="donut" height="290" :get-content="pieChart.getContent"></chart>
							</div>
						</template>
					</div>
				</div>
			</div>
			<!-- Search form -->
			<div class="{{ $data._styles.SearchForm }}">
				<search-form :on-change.once="onChange" from="1992" default-template="duplicates">
					<div slot="SearchFormTitle">
						<h2>Tre vägar till högre datakvalitet</h2>
					</div>
					<div slot="SearchFormDescription">
						<p>Välj organisation och år, välj sedan aktivitet. </p>
					</div>
				</search-form>
				<!-- Activity buttons -->
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('ERROR_LIST')">
					Ofullständig metadata
				</button>
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('LOCAL_DUPLICATES')">
					Lokala dubblettkandidater
				</button>
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('DUPLICATES')">
					Samarbetspublikationer
				</button>
			</div>
			<div class="searchResult">
				<!-- Error list activity -->
				<search-result v-if="activity === 'ERROR_LIST'" :form-model="formData.formModel" :fields="formData.fields" :on-result-received.once="onResultReceived">
					<div slot="SearchResultTitle">
						<h2>Ofullständig metadata: Granska och exportera lista</h2>
					</div>
					<div slot="SearchResultDescription">
						<p>Exportera lista för att rätta bristfällig eller saknad metadata.</p>
					</div>
				</search-result>
				<!-- Local duplicates activity -->
				<search-result v-if="activity === 'LOCAL_DUPLICATES'" :form-model="formData.formModel" :fields="formData.fields" :on-result-received.once="onResultReceived">
					<div slot="SearchResultTitle">
						<h2>Lokala dubletter: Granska och exportera lista</h2>
					</div>
					<div slot="SearchResultDescription">
						<p>Exportera lista för att åtgärda lokala dubbletter.</p>
					</div>
					<div id="WeightingHelp" slot="FilterFieldsDescription">
						<weighting-help></weighting-help>
					</div>
				</search-result>
				<!-- Duplicates activity -->
				<duplicates-list v-if="activity === 'DUPLICATES'" :form-model="formData.formModel" :fields="formData.fields" :on-result-received.once="onResultReceived">
					<div slot="DuplicatesListTitle">
						<h2>Motsägelsefulla samarbetspublikationer</h2>
					</div>
					<div slot="DuplicatesListDescription">
						<p>Följ upp motsägelsefulla metadata i samarbetspublikationer för att skapa grund för nationella jämförelser.</p>
						<weighting-help></weighting-help>
					</div>
				</duplicates-list>
			</div>
		</div>
	</site-wrapper>
</div>