<div>
	<site-wrapper activity="inspector">
		<div>
			<h2>Översikt datakvalitet
				<span v-if="labels.length > 0">
					- 
				</span>
				<span v-for="d in (labels || [])" style="display: inline-block">
					{{ d.value }}<template v-if="d.index !== $parent.labels.length-1">,&nbsp;</template>
				</span>
			</h2>
			<p>{{ formModel.from }} {{ formModel.from || formModel.to ? '-' : '' }} {{ formModel.to }}</p>
			<!-- State notifications -->
			<div style="position: relative; width: 100%;">
				<div style="position: absolute; top: 0; width: 100%;">
					<div v-if="loadingData" class="{{ $data._styles.Info }}">
						<h1>Laddar visualiseringar...</h1>
					</div>
					<div v-if="emptyAggregations" class="{{ $data._styles.Info }}">
						<h1>Tomt sökresultat</h1>
					</div>
					<div v-if="error" class="{{ $data._styles.Info }}">
						<h1>Problem med att ladda data</h1>
					</div>
				</div>
			</div>
			<!-- Visualisations -->
			<div class="{{ $data._styles.Visualisations }}">
				<carousel :conf.once="$data._carouselConf" :on-navigate="onCarouselNavigate">
					<div slot="CarouselContent-4">
						<div>&nbsp;</div>
						<div class="{{ $data._styles.ChartContainer }}">
							<template v-if="lineChart.getContent | visible 4 visibleItems">
								<div class="{{ $data._styles.GraphTitle }}">
									<p>
										Andel poster med allvarliga fel 
										<span style="font-size: x-small;">
											(allvarlighetsgrad 3 <i class="fa fa-circle" v-bind:style="{ color: violationGrade3Color }"></i> )
										</span>
									</p>
								</div>
								<div>
									<chart type="line" 
										height="390"
										:color-categories.once="colorCategories"
										tick-format="0%"
										:min="0.0"
										:max="1.0"
										:on-click.once="onClickOrg"
										:get-content="lineChart.getContent">
									</chart>
								</div>
							</template>
						</div>
					</div>
					<div slot="CarouselContent-2">
						<div>&nbsp;</div>
						<div class="{{ $data._styles.ChartContainer }}">
							<template v-if="barChart.getContent | visible 2 visibleItems">
								<div class="{{ $data._styles.GraphTitle }}">
									<p>Andel felaktiga poster per lärosäte <span v-if="labels.length === 0">(top 5)</span></p>
								</div>
								<div>
									<chart 
										type="bar" 
										x-axis-type="category" 
										:show-legend="false"
										:color-categories.once="colorCategories"
										height="373"
										tick-format="0%"
										:on-click.once="onClickOrg"
										:get-content="barChart.getContent">
									</chart>
								</div>
							</template>
						</div>
					</div>
					<div slot="CarouselContent-3">
						<div>&nbsp;</div>
						<div class="{{ $data._styles.ChartContainer }}">
							<template v-if="violationTypeDistributionChart.getContent | visible 3 visibleItems">
								<div class="{{ $data._styles.GraphTitle }}">
									<p>Distribution av feltyper</p>
								</div>
								<chart 
									type="donut" 
									order="asc"
									legend-position="right" 
									:color-categories.once="violationTypeColorCategories"
									height="350" 
									:get-content="violationTypeDistributionChart.getContent">
								</chart>
								<div class="{{ $data._styles.ExtraLegend }}">
									<span>
										Allvarlighetsgrad 1 <i class="fa fa-circle" v-bind:style="{ color: violationGrade1Color }"></i>
									</span>
									<span>
										Allvarlighetsgrad 2 <i class="fa fa-circle" v-bind:style="{ color: violationGrade2Color }"></i>
									</span>
									<span>
										Allvarlighetsgrad 3 <i class="fa fa-circle" v-bind:style="{ color: violationGrade3Color }"></i>
									</span>
								</div>
							</template>
						</div>
					</div>
					<div slot="CarouselContent-1">
						<div>&nbsp;</div>
						<div class="{{ $data._styles.ChartContainer }}">
							<template v-if="pieChart.getContent | visible 1 visibleItems">
								<div class="{{ $data._styles.GraphTitle }}">
									<p>Total andel poster med fel</p>
								</div>
								<div>
									<chart 
										type="donut"
										legend-position="bottom"  
										:color-categories.once="colorCategories"
										height="390"
										:get-content="pieChart.getContent">
									</chart>
								</div>
							</template>
						</div>
					</div>
				</carousel>
			</div>
			<!-- Search form -->
			<div class="{{ $data._styles.SearchForm }}">
				<search-form 
						:on-change.once="onChange" 
						from="2012" 
						:to="new Date().getFullYear()" 
						default-template="duplicates"
						v-ref:search-form>
					<div slot="SearchFormTitle">
						<h2>Tre vägar till hög datakvalitet</h2>
					</div>
					<div slot="SearchFormDescription">
						<p>Här söker du fram ofullständig metadata om vetenskaplig output.</p>
					</div>
				</search-form>
				<!-- Activity buttons -->
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('ERROR_LIST')">
					Visa ofullständig metadata
				</button>
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('LOCAL_DUPLICATES')">
					Visa dubblettkandidater
				</button>
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('DUPLICATES')">
					Visa samarbetspublikationer
				</button>
			</div>
			<div class="searchResult">
				<!-- Error list activity -->
				<search-result 
						v-if="activity === 'ERROR_LIST'" 
						:form-model="formData.formModel" 
						:fields="formData.fields" 
						:on-result-received.once="onResultReceived">
					<div slot="SearchResultTitle">
						<h2>Ofullständig metadata: Anpassa för export</h2>
					</div>
					<div slot="SearchResultDescription"></div>
				</search-result>
				<!-- Local duplicates activity -->
				<search-result 
						v-if="activity === 'LOCAL_DUPLICATES'" 
						:form-model="formData.formModel" 
						:fields="formData.fields" 
						:select-all-filter-fields.once="true"
						:on-result-received.once="onResultReceived">
					<div slot="SearchResultTitle">
						<h2>Dubblettkandidater enligt SwePubs viktningsregler</h2>
					</div>
					<div slot="SearchResultDescription">
						<p>
							<match-weight-help></match-weight-help>
						</p>
					</div>
				</search-result>
				<!-- Duplicates activity -->
				<duplicates-list 
						v-if="activity === 'DUPLICATES'" 
						:form-model="formData.formModel" 
						:fields="formData.fields" 
						:on-result-received.once="onResultReceived">
					<div slot="DuplicatesListTitle">
						<h2>Samarbetspublikationer</h2>
					</div>
					<div slot="DuplicatesListDescription">
						<p>Valda publikationsposter innehåller motstridiga metadata. Dessa behöver följas upp för att posterna ska tas med i datauttag för analyser på nationell nivå</p>
					</div>
				</duplicates-list>
			</div>
		</div>
	</site-wrapper>
</div>