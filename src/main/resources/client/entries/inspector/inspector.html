<div>
	<site-wrapper activity="inspector">
		<div>
			<h2>Översikt datakvalitet
				<span v-if="labels.length === 0">

				</span>
				<span v-for="d in (labels || [])" style="display: inline-block">
					{{ d.value }}
					<template v-if="d.index !== $parent.labels.length-1">,&nbsp;</template>
				</span>
			</h2>
			<div class="{{ $data._styles.YearIndicator }}">
				<h4>{{ formModel.from }} {{ formModel.from || formModel.to ? '-' : '' }} {{ formModel.to }}</h4>
			</div>
			<!-- Visualisations -->
			<div class="{{ $data._styles.Visualisations }}">
				<div v-if="loadingData" class="{{ $data._styles.Info }}">
					<h1>Laddar...</h1>
				</div>
				<div v-if="emptyAggregations" class="{{ $data._styles.Info }}">
					<h1>Tomt sökresultat</h1>
				</div>
				<div v-if="error" class="{{ $data._styles.Info }}">
					<h1>Problem med att ladda data</h1>
				</div>
				<!-- Charts -->
				<div class="row" v-show="!emptyAggregations && !error">
					<div class="col-md-4 {{ $data._styles.ChartContainer }}">
						<template v-if="lineChart.getContent">
							<div class="{{ $data._styles.GraphTitle }}">
								<p>Andel poster med fel av allvarlighetsgrad 3</p>
							</div>
							<div>
								<chart type="line" 
									height="330"
									:color-categories.once="colorCategories"
									tick-format="0%"
									:min="0.0"
									:max="1.0"
									:get-content="lineChart.getContent">
								</chart>
							</div>
						</template>
					</div>
					<div class="col-md-5 {{ $data._styles.ChartContainer }}">
						<template v-if="barChart.getContent">
							<div class="{{ $data._styles.GraphTitle }}">
								<p>Andel poster med fel</p>
							</div>
							<div>
								<chart 
									type="bar" 
									x-axis-type="category" 
									:show-legend="false"
									:color-categories.once="colorCategories"
									height="310"
									tick-format="0%"
									:get-content="barChart.getContent">
								</chart>
							</div>
						</template>
						<template v-if="violationTypeDistributionChart.getContent">
								<p>Distribution av feltyper</p>
							</div>
							<div class="{{ $data._styles.GraphTitle }}">
							<div>
								<chart 
									type="donut" 
									order="asc"
									legend-position="bottom" 
									:color-pattern.once="colorPattern" 
									height="355" 
									:get-content="violationTypeDistributionChart.getContent">
								</chart>
							</div>
						</template>
					</div>
					<div class="col-md-3 {{ $data._styles.ChartContainer }}">
						<template v-if="pieChart.getContent">
							<div class="{{ $data._styles.GraphTitle }}">
								<p>Total andel poster med fel</p>
							</div>
							<div>
								<chart 
									type="donut" 
									height="330"
									:color-categories.once="colorCategories"
									:get-content="pieChart.getContent">
								</chart>
							</div>
						</template>
					</div>
				</div>
			</div>
			<!-- Search form -->
			<div class="{{ $data._styles.SearchForm }}">
				<search-form :on-change.once="onChange" from="2012" default-template="duplicates">
					<div slot="SearchFormTitle">
						<h2>Tre vägar till hög datakvalitet</h2>
					</div>
					<div slot="SearchFormDescription">
						<p>Här söker du fram ofullständig metadata om vetenskaplig output.</p>
					</div>
				</search-form>
				<!-- Activity buttons -->
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('ERROR_LIST')">
					Visa ofullständig metadata
				</button>
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('LOCAL_DUPLICATES')">
					Visa dubblettkandidater
				</button>
				<button class="btn btn-info {{ $data._styles.BtnHuge }}" v-on:click="startActivity('DUPLICATES')">
					Visa samarbetspublikationer
				</button>
			</div>
			<div class="searchResult">
				<!-- Error list activity -->
				<search-result 
						v-if="activity === 'ERROR_LIST'" 
						:form-model="formData.formModel" 
						:fields="formData.fields" 
						:on-result-received.once="onResultReceived">
					<div slot="SearchResultTitle">
						<h2>Ofullständig metadata: Anpassa för export</h2>
					</div>
					<div slot="SearchResultDescription"></div>
				</search-result>
				<!-- Local duplicates activity -->
				<search-result 
						v-if="activity === 'LOCAL_DUPLICATES'" 
						:form-model="formData.formModel" 
						:fields="formData.fields" 
						:select-all-filter-fields.once="true"
						:on-result-received.once="onResultReceived">
					<div slot="SearchResultTitle">
						<h2>Dubblettkandidater</h2>
					</div>
					<div slot="SearchResultDescription"></div>
					<div id="WeightingHelp" slot="FilterFieldsDescription">
						<weighting-help></weighting-help>
					</div>
				</search-result>
				<!-- Duplicates activity -->
				<duplicates-list 
						v-if="activity === 'DUPLICATES'" 
						:form-model="formData.formModel" 
						:fields="formData.fields" 
						:on-result-received.once="onResultReceived">
					<div slot="DuplicatesListTitle">
						<h2>Samarbetspublikationer</h2>
					</div>
					<div slot="DuplicatesListDescription">
						<p>Valda publikationsposter innehåller motstridiga metadata. Dessa behöver följas upp för att posterna ska tas med i datauttag för analyser på nationell nivå</p>
					</div>
				</duplicates-list>
			</div>
		</div>
	</site-wrapper>
</div>